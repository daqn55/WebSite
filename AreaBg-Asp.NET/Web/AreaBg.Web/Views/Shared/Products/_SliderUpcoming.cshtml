@model List<AreaBg.Web.ViewModels.Products.ProductPartDetailsViewModel>

@if (Model.Count >= 3)
{
    <div class="mt-2 mb-4" id="upcomingSlider-lg">
        <div class="mb-md-2 border-bottom" style="border-bottom-color: black !important;">
            <h5 class="font-av text-uppercase">Предстоящи книги</h5>
        </div>
        <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
            <ol class="carousel-indicators">
                @{var count = 0;}
                @for (int i = 0; i < Model.Count; i += 3)
                {
                    if (i == 0)
                    {
                        <li data-target="#carouselExampleIndicators" data-slide-to="@count" class="active"></li>
                    }
                    else
                    {
                        <li data-target="#carouselExampleIndicators" data-slide-to="@count"></li>
                    }
                    count++;
                }
            </ol>
            <div class="carousel-inner">
                @for (int i = 0; i < Model.Count; i += 3)
                {
                    var p1 = Model.ElementAtOrDefault(i);
                    var p2 = Model.ElementAtOrDefault(i + 1);
                    var p3 = Model.ElementAtOrDefault(i + 2);

                    var p11 = p1 == null ? null : Model[i];
                    var p22 = p2 == null ? null : Model[i + 1];
                    var p33 = p3 == null ? null : Model[i + 2];

                    <div class="carousel-item @(i == 0 ? "active" : "") ">
                        <section class="mx-md-2 text-center">
                            <div class="row font-sp">
                                <div class="col">
                                    <div class="row cart-center-sm">
                                        <div class="col-md mb-2"></div>
                                        <partial name="_CardPartial" model="@p11" />
                                        <partial name="_CardPartial" model="@p22" />
                                        <partial name="_CardPartial" model="@p33" />
                                        <div class="col-md mb-2"></div>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                }
            </div>
            <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </div>
    <div class="mt-2 mb-4" id="upcomingSlider-sm">
        <div class="mb-md-2 border-bottom" style="border-bottom-color: black !important;">
            <h5 class="font-av text-uppercase">Предстоящи книги</h5>
        </div>
        <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
                @for (int i = 0; i < Model.Count; i++)
                {
                    var p1 = Model.ElementAtOrDefault(i);

                    var p11 = p1 == null ? null : Model[i];

                    <div class="carousel-item @(i == 0 ? "active" : "") ">
                        <section class="mx-md-2 text-center">
                            <div class="row font-sp">
                                <div class="col">
                                    <div class="row cart-center-sm">
                                        <partial name="_CardPartial" model="@p11" />
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                }
            </div>
            <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </div>
}
